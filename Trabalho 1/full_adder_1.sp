* This file represents the description of 1 bit full adder.
* The SPICE list was generated by SwitchCraft.
*.options compat=PSPICE
.include NMOS_VTG.inc
.include PMOS_VTG.inc

* ------------------------------ *
* Voltage
* Vname n+ n- value
vgnd 	GND_ 0 
vcc 	vcc 0 dc 1

* ------------------------------ *
.param supply = 1 	* supply == vcc
.param s_Wp = '0.1u*3*1.8'		* minimal size X nseries X lambda
.param s_Wn = '0.1u*3'
.param c_Wp = '0.1u*3*1.8'
.param c_Wpc =	'0.1u*4*1.8'	 * critical path
.param c_Wn = '0.1u*3'
.param c_Wnc = '0.1u*4'			 *critical path

.param length = '50n'

* ------------------------------ *
* source input
* Vname n+ n- pulse(v1 v2 td trise tfall pw per)
vin1 ci 0 pulse (0 1 0 0.1n 0.1n 1n 2.2n)
vin2 b 0 pulse (0 1 0 0.1n 0.1n 2.1n 4.4n)
Vin3 a 0 pulse (0 1 0 0.1n 0.1n 4.3n 16.8n)

* ------------------------------ *
* subckt definition
* Mname d g s b tipo w l vtho

* output from full adder
.SUBCKT fadd_sum a b ci out vcc
*.PININFO a:I b:I ci:I out:O vcc:P 0:G
*.EQN out=((b * !ci * !a) + (!b * ci * !a) + (b * ci * a) + (!b * !ci * a));
MP1 out a pu_n1 vcc PMOS w='s_Wp'	l='length'
MP2 out not_a pu_n3 vcc PMOS w='s_Wp'	l='length'
MP3 pu_n1 ci pu_n4 vcc PMOS w='s_Wp'	l='length'
MP4 pu_n1 not_ci pu_n5 vcc PMOS w='s_Wp'	l='length'
MP5 pu_n4 not_b vcc vcc PMOS w='s_Wp'	l='length'
MP6 pu_n5 b vcc vcc PMOS w='s_Wp'	l='length'
MP7 pu_n3 ci pu_n5 vcc PMOS w='s_Wp'	l='length'
MP8 pu_n3 not_ci pu_n4 vcc PMOS w='s_Wp'	l='length'
MN9 out not_a pd_n1 0 NMOS w='s_Wn'	l='length'
MN10 out a pd_n3 0 NMOS w='s_Wn'	l='length'
MN11 pd_n1 not_ci pd_n4 0 NMOS w='s_Wn'	l='length'
MN12 pd_n1 ci pd_n5 0 NMOS w='s_Wn'	l='length'
MN13 pd_n4 not_b 0 0 NMOS w='s_Wn'	l='length'
MN14 pd_n5 b 0 0 NMOS w='s_Wn'	l='length'
MN15 pd_n3 not_ci pd_n5 0 NMOS w='s_Wn'	l='length'
MN16 pd_n3 ci pd_n4 0 NMOS w='s_Wn'	l='length'
MP_inv17 not_a a vcc vcc PMOS w='s_Wp'	l='length'
MN_inv18 not_a a 0 0 NMOS w='s_Wn'	l='length'
MP_inv19 not_b b vcc vcc PMOS w='s_Wp'	l='length'
MN_inv20 not_b b 0 0 NMOS w='s_Wn'	l='length'
MP_inv21 not_ci ci vcc vcc PMOS w='s_Wp'	l='length'
MN_inv22 not_ci ci 0 0 NMOS w='s_Wn'	l='length'
.ENDS fadd_sum

* carry out from full adder
.SUBCKT fadd_carry a b ci c_out vcc
*.PININFO a:I b:I ci:I not_out:O vcc:P 0:G
*.EQN not_out=!((!ci * !a) + (!b * a * !ci) + (!b * ci * !a));
MP1 out a pu_n1 vcc PMOS w='c_Wp'	l='length'
MP2 out not_a pu_n3 vcc PMOS w='c_Wpc'	l='length'
MP3 pu_n1 ci vcc vcc PMOS w='c_Wpc'	l='length'
MP4 pu_n1 not_ci pu_n5 vcc PMOS w='c_Wpc'	l='length'
MP5 pu_n5 b vcc vcc PMOS w='c_Wp'	l='length'
MP6 pu_n3 ci pu_n5 vcc PMOS w='c_Wpc'	l='length'
MN7 out not_a pd_n1 0 NMOS w='c_Wnc'	l='length'
MN8 out a pd_n3 0 NMOS w='c_Wn'	l='length'
MN9 pd_n1 ci pd_n4 0 NMOS w='c_Wnc'	l='length'
MN10 pd_n4 b 0 0 NMOS w='c_Wn'	l='length'
MN11 pd_n3 not_ci pd_n4 0 NMOS w='c_Wnc'	l='length'
MN12 pd_n3 ci 0 0 NMOS w='c_Wnc'	l='length'
MP_inv13 not_a a vcc vcc PMOS w='c_Wp'	l='length'
MN_inv14 not_a a 0 0 NMOS w='c_Wn'	l='length'
MP_inv15 not_ci ci vcc vcc PMOS w='c_Wpc'	l='length'
MN_inv16 not_ci ci 0 0 NMOS w='c_Wnc'	l='length'
MP_inv17 c_out out vcc vcc PMOS w='c_Wpc'	l='length'
MN_inv18 c_out out 0 0 NMOS w='c_Wnc'	l='length'
.ENDS fadd_carry


* ------------------------------ *
* Circuit Description
X1 a b ci out vcc fadd_sum
X2 a b ci c_out vcc fadd_carry

* ------------------------------ *
* capacitor
* Cname  n+ n- value
C1 out 0 2.1fF

* ------------------------------ *
* transient analysis
* .tran step total
.tran 0.001n 10n

* ------------------------------ *
* plot outputs
*.print tran a b out
.print v(a) v(b) v(ci) v(out) v(c_out)

.end